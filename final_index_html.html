<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eur√≥pai Kl√≠maj√°t√©k</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üåç Eur√≥pai Kl√≠maj√°t√©k</h1>
            <p>Tal√°ld meg a kl√≠madiagram alapj√°n a megfelel≈ë eur√≥pai r√©gi√≥t vagy v√°rost!</p>
        </header>
        
        <div class="stats-panel">
            <div class="stat-card">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">Pontok</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="round">1</div>
                <div class="stat-label">K√∂r</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="correct">0</div>
                <div class="stat-label">Helyes</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="total">0</div>
                <div class="stat-label">√ñsszesen</div>
            </div>
        </div>
        
        <div class="game-area">
            <div class="diagram-section">
                <h2 id="challenge-text">Eur√≥pa melyik r√©sz√©re jellemz≈ë ez az √©ghajlat?</h2>
                <div class="chart-container">
                    <canvas id="climateChart" width="500" height="350"></canvas>
                </div>
                <p class="chart-legend">
                    üå°Ô∏è Piros vonal: h≈ëm√©rs√©klet (¬∞C) | üåßÔ∏è K√©k oszlopok: csapad√©k (mm)
                </p>
                <div class="regions-info">
                    <div class="region-item">
                        <span class="region-color north"></span>
                        <span class="region-name">√âszak-Eur√≥pa</span>
                    </div>
                    <div class="region-item">
                        <span class="region-color west"></span>
                        <span class="region-name">Nyugat-Eur√≥pa</span>
                    </div>
                    <div class="region-item">
                        <span class="region-color south"></span>
                        <span class="region-name">D√©l-Eur√≥pa</span>
                    </div>
                    <div class="region-item">
                        <span class="region-color central"></span>
                        <span class="region-name">K√∂z√©p-Eur√≥pa</span>
                    </div>
                    <div class="region-item">
                        <span class="region-color east"></span>
                        <span class="region-name">Kelet-Eur√≥pa</span>
                    </div>
                </div>
            </div>
            
            <div class="map-section">
                <div id="map"></div>
                <p class="map-instruction">
                    Kattints a t√©rk√©pre a tipped lead√°s√°hoz!
                </p>
            </div>
        </div>
        
        <div class="controls">
            <button onclick="newGame()" class="btn btn-primary">üé≤ √öj j√°t√©k</button>
            <button onclick="showAnswer()" id="showAnswerBtn" class="btn btn-secondary">üí° Mutasd a v√°laszt</button>
            <button onclick="nextRound()" id="nextRoundBtn" class="btn btn-success" style="display:none;">‚ñ∂Ô∏è K√∂vetkez≈ë k√∂r</button>
        </div>
        
        <div id="result" class="result-panel"></div>
        
        <footer class="footer">
            <div class="data-source">
                <h3>Adatforr√°s</h3>
                <p>
                    Kl√≠maadatok: <strong>ERA5 Reanalysis 1991-2020</strong><br>
                    Eur√≥pai Id≈ëj√°r√°si Szolg√°lat (ECMWF)<br>
                    Feldolgozva: <span id="extraction-date">-</span>
                </p>
            </div>
            <div class="game-info">
                <h3>J√°t√©kszab√°lyok</h3>
                <ul>
                    <li><strong>1. szint:</strong> Tal√°ld meg a helyes eur√≥pai r√©gi√≥t</li>
                    <li><strong>Pontsz√°m:</strong> 100 pont helyes r√©gi√≥√©rt, 0 pont t√©ves r√©gi√≥√©rt</li>
                    <li><strong>Oktat√°si c√©l:</strong> Eur√≥pa k√ºl√∂nb√∂z≈ë kl√≠mat√≠pusainak megismer√©se</li>
                </ul>
            </div>
        </footer>
    </div>

    <!-- JavaScript k√∂nyvt√°rak -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Jav√≠tott inicializ√°l√°s: csak akkor t√∂lti be a j√°t√©kot, amikor Leaflet k√©sz -->
    <script>
        function initializeGame() {
            if (typeof L !== 'undefined') {
                console.log('Leaflet bet√∂ltve, j√°t√©k inicializ√°l√°s...');
                // Climate app bet√∂lt√©se
                const script = document.createElement('script');
                script.src = 'js/climate-app.js';
                script.onload = function() {
                    console.log('Climate app bet√∂ltve √©s k√©sz!');
                };
                script.onerror = function() {
                    console.error('Climate app nem t√∂lt≈ëd√∂tt be');
                    document.getElementById('map').innerHTML = '<div style="padding: 20px; text-align: center; color: red;">Hiba: J√°t√©k logika nem el√©rhet≈ë</div>';
                };
                document.head.appendChild(script);
            } else {
                console.log('Leaflet m√©g nem el√©rhet≈ë, v√°rakoz√°s...');
                setTimeout(initializeGame, 500);
            }
        }
        
        // Inicializ√°l√°s ind√≠t√°sa
        document.addEventListener('DOMContentLoaded', initializeGame);
        
        // Fallback ha t√∫l sok√°ig tart
        setTimeout(function() {
            if (typeof L === 'undefined') {
                console.error('Leaflet timeout');
                document.getElementById('map').innerHTML = '<div style="padding: 20px; text-align: center; background: #ffebee; border: 1px solid #f44336; border-radius: 5px;"><h3>T√©rk√©p nem el√©rhet≈ë</h3><p>A t√©rk√©p funkci√≥ offline m√≥dban nem m≈±k√∂dik.<br>Ellen≈ërizd az internetkapcsolatot √©s friss√≠tsd az oldalt.</p></div>';
            }
        }, 10000);
    </script>
</body>
</html>